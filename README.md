# WOL 局域网唤醒小工具

一个基于 Flask 的简易网页工具，用于管理设备并发送 Wake-on-LAN（WOL）魔术包。

## 快速开始

1) 安装依赖
- 在项目目录下执行：
  - macOS/Linux：`python3 -m pip install -r requirements.txt`
  - Windows：`py -m pip install -r requirements.txt`

2) 运行服务（开发模式）
- 在项目目录执行：`python3 app.py`
- 浏览器访问：`http://127.0.0.1:5050/`

## 设备数据（devices.json）
- 与应用同目录，保存设备信息（备注、用户 IP、MAC、广播 IP）。
- 示例：
```json
[
  {
    "remark": "张三",
    "user_ip": "1.1.23.42",
    "mac": "AA:BB:CC:DD:EE:FF",
    "broadcast_ip": "1.1.23.255"
  }
]
```
- 广播 IP 用于跨网段唤醒（需路由器支持定向广播）。如子网掩码为 255.255.255.0，1.1.23.xx 的广播一般为 1.1.23.255。


## 广播 IP 示例
- /24（255.255.255.0）：例如 1.1.23.xx 的广播为 1.1.23.255。
- /23（255.255.254.0）：每 2 个连续网段组成一个网络。
  - 1.1.22.0–1.1.23.255 范围（如 1.1.23.42），广播为 1.1.23.255。
  - 1.1.20.0–1.1.21.255 范围（如 1.1.21.15），广播为 1.1.21.255。
  - 简便方法：第三段 N 偶数对齐，网络第三段为 (N & ~1)，广播第三段为 (N | 1)。
- /22（255.255.252.0）：每 4 个连续网段组成一个网络。
  - 1.1.20.0–1.1.23.255 范围（如 1.1.23.99），广播为 1.1.23.255。
  - 1.1.24.0–1.1.27.255 范围（如 1.1.24.11），广播为 1.1.27.255。
  - 简便方法：第三段 N 以 4 对齐，网络第三段为 (N & ~3)，广播第三段为 (N | 3)。

## 常见问题
- 跨网段唤醒：需要网络设备允许定向广播或 UDP 广播转发；否则仅同网段广播有效。
- MAC 格式：支持 `AA:BB:CC:DD:EE:FF` 或无分隔符形式，导入时会自动规范化。

## windows其他功能
- 将系统托盘集成到新版 app.py （右键菜单：打开界面、切换开机自启、查看日志、退出）。
- 添加用户级开机自启（ HKCU\Software\Microsoft\Windows\CurrentVersion\Run ）。
- 集成文件日志 wol.log 并在托盘菜单中提供查看。